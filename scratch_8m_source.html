<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>ActiveResourceKit: scratch.m Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">ActiveResourceKit
   &#160;<span id="projectnumber">v0.3&nbsp;(357.13)</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">scratch.m</div>  </div>
</div>
<div class="contents">
<a href="scratch_8m.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a><a class="code" href="scratch_8m.html#a8cd20758154e6ef9cbca0d7d5afd6240">00001</a> - (id)executeFetchRequest:(NSFetchRequest *)request withContext:(NSManagedObjectContext *)context error:(NSError *__autoreleasing *)outError
<a name="l00002"></a>00002 {
<a name="l00003"></a>00003     NSMutableDictionary *options = [NSMutableDictionary dictionary];
<a name="l00004"></a>00004     NSUInteger fetchLimit = [request fetchLimit];
<a name="l00005"></a>00005     <span class="keywordflow">if</span> (fetchLimit)
<a name="l00006"></a>00006     {
<a name="l00007"></a>00007         [options setValue:[NSNumber numberWithUnsignedInteger:fetchLimit] forKey:@&quot;limit&quot;];
<a name="l00008"></a>00008     }
<a name="l00009"></a>00009     NSUInteger fetchOffset = [request fetchOffset];
<a name="l00010"></a>00010     <span class="keywordflow">if</span> (fetchOffset)
<a name="l00011"></a>00011     {
<a name="l00012"></a>00012         [options setValue:[NSNumber numberWithUnsignedInteger:fetchOffset] forKey:@&quot;offset&quot;];
<a name="l00013"></a>00013     }
<a name="l00014"></a>00014     <span class="keywordtype">id</span> __block result = nil;
<a name="l00015"></a>00015     [[<span class="keyword">self</span> serviceForEntityName:[request entityName]] findAllWithOptions:options completionHandler:^(NSHTTPURLResponse *HTTPResponse, NSArray *resources, NSError *error) {
<a name="l00016"></a>00016         if (resources)
<a name="l00017"></a>00017         {
<a name="l00018"></a>00018             switch ([request resultType])
<a name="l00019"></a>00019             {
<a name="l00020"></a>00020                 case NSManagedObjectResultType:
<a name="l00021"></a>00021                     result = [NSMutableArray array];
<a name="l00022"></a>00022                     NSEntityDescription *entity = [NSEntityDescription entityForName:[request entityName] inManagedObjectContext:context];
<a name="l00023"></a>00023                     for (ARResource *resource in resources)
<a name="l00024"></a>00024                     {
<a name="l00025"></a>00025                         NSManagedObject *object = [[NSManagedObject alloc] initWithEntity:entity insertIntoManagedObjectContext:context];
<a name="l00026"></a>00026                         NSDictionary *attributesByName = [entity attributesByName];
<a name="l00027"></a>00027                         for (NSString *attributeName in attributesByName)
<a name="l00028"></a>00028                         {
<a name="l00029"></a>00029                             NSAttributeDescription *attribute = [attributesByName objectForKey:attributeName];
<a name="l00030"></a>00030                             id value = [resource valueForKey:attributeName];
<a name="l00031"></a>00031                             switch ([attribute attributeType])
<a name="l00032"></a>00032                             {
<a name="l00033"></a>00033                                 case NSDateAttributeType:
<a name="l00034"></a>00034                                     value = ASDateFromRFC3339String(value);
<a name="l00035"></a>00035                             }
<a name="l00036"></a>00036                             [object setValue:value forKey:attributeName];
<a name="l00037"></a>00037                         }
<a name="l00038"></a>00038                         [result addObject:object];
<a name="l00039"></a>00039                     }
<a name="l00040"></a>00040                     result = [result copy];
<a name="l00041"></a>00041                     break;
<a name="l00042"></a>00042                 case NSManagedObjectIDResultType:
<a name="l00043"></a>00043                     break;
<a name="l00044"></a>00044                 case NSDictionaryResultType:
<a name="l00045"></a>00045                     break;
<a name="l00046"></a>00046                 case NSCountResultType:
<a name="l00047"></a>00047                     result = [NSArray arrayWithObject:[NSNumber numberWithUnsignedInteger:[resources count]]];
<a name="l00048"></a>00048             }
<a name="l00049"></a>00049         }
<a name="l00050"></a>00050         else
<a name="l00051"></a>00051         {
<a name="l00052"></a>00052             
<a name="l00053"></a>00053         }
<a name="l00054"></a>00054     }];
<a name="l00055"></a>00055     <span class="keywordflow">return</span> result;
<a name="l00056"></a>00056     <span class="comment">//------------------------------------------------------------------------------</span>
<a name="l00057"></a>00057 <span class="preprocessor">#if 0</span>
<a name="l00058"></a>00058 <span class="preprocessor"></span>    <a class="code" href="interface_a_r_concurrent_fetch_request.html">ARConcurrentFetchRequest</a> *fetch = [[<a class="code" href="interface_a_r_concurrent_fetch_request.html">ARConcurrentFetchRequest</a> alloc] init];
<a name="l00059"></a>00059     [fetch setAffectedStores:[<span class="keyword">self</span> otherPersistentStores]];
<a name="l00060"></a>00060     [fetch <a class="code" href="interface_a_r_concurrent_fetch_request.html#af5557452f312029577e6074f9966a8ea">findAll</a>:request <a class="code" href="interface_a_r_concurrent_fetch_request.html#af5557452f312029577e6074f9966a8ea">withService</a>:[<span class="keyword">self</span> serviceForEntityName:[request entityName]] <a class="code" href="interface_a_r_concurrent_fetch_request.html#af5557452f312029577e6074f9966a8ea">context</a>:[<span class="keyword">self</span> childContextForParentContext:context]];
<a name="l00061"></a>00061     NSMutableDictionary *options = [NSMutableDictionary dictionary];
<a name="l00062"></a>00062     NSUInteger fetchLimit = [request fetchLimit];
<a name="l00063"></a>00063     <span class="keywordflow">if</span> (fetchLimit)
<a name="l00064"></a>00064     {
<a name="l00065"></a>00065         [options setValue:[NSNumber numberWithUnsignedInteger:fetchLimit] forKey:@&quot;limit&quot;];
<a name="l00066"></a>00066     }
<a name="l00067"></a>00067     NSUInteger fetchOffset = [request fetchOffset];
<a name="l00068"></a>00068     <span class="keywordflow">if</span> (fetchOffset)
<a name="l00069"></a>00069     {
<a name="l00070"></a>00070         [options setValue:[NSNumber numberWithUnsignedInteger:fetchOffset] forKey:@&quot;offset&quot;];
<a name="l00071"></a>00071     }
<a name="l00072"></a>00072     <a class="code" href="interface_a_r_service.html" title="An active resource&#39;s service configuration.">ARService</a> *service = [<span class="keyword">self</span> serviceForEntityName:[request entityName]];
<a name="l00073"></a>00073     [service <a class="code" href="interface_a_r_service.html#a494130801b4bfc657cb420c5b0c52cc9">primaryKeyLazily</a>];
<a name="l00074"></a>00074     <span class="comment">// Where does this run? It runs in the main thread. Should we assert this?</span><span class="comment">// However, where does this run? It does not run in the main thread. Yet, it accesses the original request and the downloaded resources and the child context.</span><span class="comment">// The following set-arithmetic assumes that the ID numbers are numbers, specifically NSNumbers. Hence they compare equal or not equal when matched.</span><span class="comment">// Set the attribute unconditionally. Is this the most efficient way albeit very simple? Is it worth making comparisons between then and now for optimum performance?</span>[service <a class="code" href="interface_a_r_service.html#a9f1a7ce9c1038ac823d3379de9495bc7">findAllWithOptions</a>:options <a class="code" href="interface_a_r_service.html#a9f1a7ce9c1038ac823d3379de9495bc7">completionHandler</a>:^(NSHTTPURLResponse *HTTPResponse, NSArray *resources, NSError *error) {
<a name="l00075"></a>00075         
<a name="l00076"></a>00076         if (resources)
<a name="l00077"></a>00077         {
<a name="l00078"></a>00078             NSMutableSet *serverIDs = [NSMutableSet set];
<a name="l00079"></a>00079             for (ARResource *resource in resources)
<a name="l00080"></a>00080             {
<a name="l00081"></a>00081                 [serverIDs addObject:[resource ID]];
<a name="l00082"></a>00082             }
<a name="l00083"></a>00083             NSManagedObjectContext *childContext = [<span class="keyword">self</span> childContextForParentContext:context];
<a name="l00084"></a>00084             [childContext performBlock:^{
<a name="l00085"></a>00085                 
<a name="l00086"></a>00086                 NSFetchRequest *childRequest = [NSFetchRequest fetchRequestWithEntityName:[request entityName]];
<a name="l00087"></a>00087                 [childRequest setAffectedStores:[<span class="keyword">self</span> otherAffectedStores]];
<a name="l00088"></a>00088                 [childRequest setFetchLimit:[request fetchLimit]];
<a name="l00089"></a>00089                 [childRequest setFetchOffset:[request fetchOffset]];
<a name="l00090"></a>00090                 [childRequest setResultType:NSDictionaryResultType];
<a name="l00091"></a>00091                 [childRequest setPropertiesToFetch:[NSArray arrayWithObject:@&quot;id&quot;]];
<a name="l00092"></a>00092                 NSError *error = nil;
<a name="l00093"></a>00093                 NSArray *objects = [childContext executeFetchRequest:childRequest error:&amp;error];
<a name="l00094"></a>00094                 NSMutableSet *clientIDs = [NSMutableSet set];
<a name="l00095"></a>00095                 for (NSDictionary *object in objects)
<a name="l00096"></a>00096                 {
<a name="l00097"></a>00097                     [clientIDs addObject:[object valueForKey:@&quot;id&quot;]];
<a name="l00098"></a>00098                 }
<a name="l00099"></a>00099                 
<a name="l00100"></a>00100                 NSMutableSet *insertIDs = [NSMutableSet setWithSet:serverIDs];
<a name="l00101"></a>00101                 [insertIDs minusSet:clientIDs];
<a name="l00102"></a>00102                 NSMutableSet *updateIDs = [NSMutableSet setWithSet:serverIDs];
<a name="l00103"></a>00103                 [updateIDs unionSet:clientIDs];
<a name="l00104"></a>00104                 NSMutableSet *deleteIDs = [NSMutableSet setWithSet:clientIDs];
<a name="l00105"></a>00105                 [deleteIDs minusSet:serverIDs];
<a name="l00106"></a>00106                 for (NSNumber *ID in insertIDs)
<a name="l00107"></a>00107                 {
<a name="l00108"></a>00108                     NSLog(@&quot;%@&quot;, ID);
<a name="l00109"></a>00109                 }
<a name="l00110"></a>00110                 for (ARResource *resource in resources)
<a name="l00111"></a>00111                 {
<a name="l00112"></a>00112                     ARService *service = [resource serviceLazily];
<a name="l00113"></a>00113                     [service <a class="code" href="interface_a_r_service.html#a494130801b4bfc657cb420c5b0c52cc9">primaryKeyLazily</a>];
<a name="l00114"></a>00114                     [resource attributes];
<a name="l00115"></a>00115                     NSNumber *ID = [resource ID];
<a name="l00116"></a>00116                     if ([insertIDs member:ID])
<a name="l00117"></a>00117                     {
<a name="l00118"></a>00118                         NSEntityDescription *entity = [NSEntityDescription entityForName:[request entityName] inManagedObjectContext:context];
<a name="l00119"></a>00119                         NSManagedObject *object = [[NSManagedObject alloc] initWithEntity:entity insertIntoManagedObjectContext:context];
<a name="l00120"></a>00120                         NSDictionary *attributesByName = [entity attributesByName];
<a name="l00121"></a>00121                         for (NSString *attributeName in attributesByName)
<a name="l00122"></a>00122                         {
<a name="l00123"></a>00123                             NSAttributeDescription *attribute = [attributesByName objectForKey:attributeName];
<a name="l00124"></a>00124                             id value = [resource valueForKey:attributeName];
<a name="l00125"></a>00125                             switch ([attribute attributeType])
<a name="l00126"></a>00126                             {
<a name="l00127"></a>00127                                 case NSDateAttributeType:
<a name="l00128"></a>00128                                     value = ASDateFromRFC3339String(value);
<a name="l00129"></a>00129                             }
<a name="l00130"></a>00130                             
<a name="l00131"></a>00131                             [object setValue:value forKey:attributeName];
<a name="l00132"></a>00132                         }
<a name="l00133"></a>00133                     }
<a name="l00134"></a>00134                 }
<a name="l00135"></a>00135                 if (![childContext save:&amp;error])
<a name="l00136"></a>00136                 {
<a name="l00137"></a>00137                     
<a name="l00138"></a>00138                 }
<a name="l00139"></a>00139             }];
<a name="l00140"></a>00140         }
<a name="l00141"></a>00141         else
<a name="l00142"></a>00142         {
<a name="l00143"></a>00143             
<a name="l00144"></a>00144         }
<a name="l00145"></a>00145     }];
<a name="l00146"></a>00146 <span class="preprocessor">#if 0</span>
<a name="l00147"></a>00147 <span class="preprocessor"></span>    <span class="comment">//------------------------------------------------------------------------------</span>
<a name="l00148"></a>00148     <span class="comment">// Initially, within this block scope, resolve all the objects required for now and all the subsequently-executed blocks for when the remote resources return, assuming the connection succeeds. Requirements include the entity name, service along with its connection, and a child context for running asynchronous fetching.</span>
<a name="l00149"></a>00149     NSString *entityName = [request entityName];
<a name="l00150"></a>00150     <span class="comment">//  NSPredicate *predicate = [request predicate];</span>
<a name="l00151"></a>00151     <span class="comment">//  NSArray *sortDescriptors = [request sortDescriptors];</span>
<a name="l00152"></a>00152     <span class="comment">//  NSUInteger fetchLimit = [request fetchLimit];</span>
<a name="l00153"></a>00153     <span class="comment">//  NSArray *affectedStores = [request affectedStores];</span>
<a name="l00154"></a>00154     <span class="comment">//  NSFetchRequestResultType resultType = [request resultType];</span>
<a name="l00155"></a>00155     <span class="comment">//  BOOL includesSubentities = [request includesSubentities];</span>
<a name="l00156"></a>00156     <span class="comment">//  BOOL includesPropertyValues = [request includesPropertyValues];</span>
<a name="l00157"></a>00157     <span class="comment">//  BOOL returnsObjectsAsFaults = [request returnsObjectsAsFaults];</span>
<a name="l00158"></a>00158     <span class="comment">//  NSArray *relationshipKeyPathsForPrefetching = [request relationshipKeyPathsForPrefetching];</span>
<a name="l00159"></a>00159     <span class="comment">//  BOOL includesPendingChanges = [request includesPendingChanges];</span>
<a name="l00160"></a>00160     <span class="comment">//  BOOL returnsDistinctResults = [request returnsDistinctResults];</span>
<a name="l00161"></a>00161     <span class="comment">//  NSArray *propertiesToFetch = [request propertiesToFetch];</span>
<a name="l00162"></a>00162     <span class="comment">//  NSUInteger fetchOffset = [request fetchOffset];</span>
<a name="l00163"></a>00163     <span class="comment">//  NSUInteger fetchBatchSize = [request fetchBatchSize];</span>
<a name="l00164"></a>00164     <span class="comment">//  BOOL shouldRefreshRefetchedObjects = [request shouldRefreshRefetchedObjects];</span>
<a name="l00165"></a>00165     <span class="comment">//  NSArray *propertiesToGroupBy = [request propertiesToGroupBy];</span>
<a name="l00166"></a>00166     <span class="comment">//  NSPredicate *havingPredicate = [request havingPredicate];</span>
<a name="l00167"></a>00167     
<a name="l00168"></a>00168     <span class="comment">// Run this in the main thread. Run it here. Same goes for the child context.</span>
<a name="l00169"></a>00169     <a class="code" href="interface_a_r_service.html" title="An active resource&#39;s service configuration.">ARService</a> *service = [<span class="keyword">self</span> serviceForEntityName:entityName];
<a name="l00170"></a>00170     NSManagedObjectContext *childContext = [<span class="keyword">self</span> childContextForParentContext:context];
<a name="l00171"></a>00171     
<a name="l00172"></a>00172     <span class="comment">// Before going any further, determine reachability. Is the remote service reachable at present? Typically this requires some form of Internet connection. The store retains its current reachability status and receives reachability signals. No point going further unless the remote service proves reachable. The app falls back on the local cache.</span>
<a name="l00173"></a>00173     <span class="comment">// Fetching has two phases. The first determines the client-site entity tag (E-Tag). Unless the client-side caches the path and E-Tag, the first phase fetches the local updated-at dates and computes their MD5 sum. The first phase ends when the client sends a GET request with an If-Match header.</span>
<a name="l00174"></a>00174     <span class="comment">// The remote service answers the GET request in one of two ways. Either the E-Tag matches or not. If it matches, the response contains an empty body and a response code indicating a cache hit. Otherwise, if the E-Tag mismatches, the remote responds by sending back the matching resources. In this event, the client side updates the cached objects. That includes creating and deleting objects that do not appear on the server. The incremental store attempts to synchronise with the remote store.</span>
<a name="l00175"></a>00175     <span class="comment">// There may be other caches in-between the client and the server.</span>
<a name="l00176"></a>00176     <span class="comment">// What happens at the server side?</span>
<a name="l00177"></a>00177     NSMutableDictionary *options = [NSMutableDictionary dictionary];
<a name="l00178"></a>00178     NSUInteger fetchLimit = [request fetchLimit];
<a name="l00179"></a>00179     <span class="keywordflow">if</span> (fetchLimit)
<a name="l00180"></a>00180     {
<a name="l00181"></a>00181         [options setValue:[NSNumber numberWithUnsignedInteger:fetchLimit] forKey:@&quot;limit&quot;];
<a name="l00182"></a>00182     }
<a name="l00183"></a>00183     NSUInteger fetchOffset = [request fetchOffset];
<a name="l00184"></a>00184     <span class="keywordflow">if</span> (fetchOffset)
<a name="l00185"></a>00185     {
<a name="l00186"></a>00186         [options setValue:[NSNumber numberWithUnsignedInteger:fetchOffset] forKey:@&quot;offset&quot;];
<a name="l00187"></a>00187     }
<a name="l00188"></a>00188     <span class="comment">// Set the attribute unconditionally. Is this the most efficient way albeit very simple? Is it worth making comparisons between then and now for optimum performance?</span>[service findAllWithOptions:options completionHandler:^(NSHTTPURLResponse *HTTPResponse, NSArray *resources, NSError *error) {
<a name="l00189"></a>00189         if (resources)
<a name="l00190"></a>00190         {
<a name="l00191"></a>00191             for (ARResource *resource in resources)
<a name="l00192"></a>00192             {
<a name="l00193"></a>00193                 NSEntityDescription *entity = [NSEntityDescription entityForName:entityName inManagedObjectContext:context];
<a name="l00194"></a>00194                 NSManagedObject *object = [[NSManagedObject alloc] initWithEntity:entity insertIntoManagedObjectContext:context];
<a name="l00195"></a>00195                 NSDictionary *attributesByName = [entity attributesByName];
<a name="l00196"></a>00196                 for (NSString *attributeName in attributesByName)
<a name="l00197"></a>00197                 {
<a name="l00198"></a>00198                     NSAttributeDescription *attribute = [attributesByName objectForKey:attributeName];
<a name="l00199"></a>00199                     id value = [resource valueForKey:attributeName];
<a name="l00200"></a>00200                     switch ([attribute attributeType])
<a name="l00201"></a>00201                     {
<a name="l00202"></a>00202                         case NSDateAttributeType:
<a name="l00203"></a>00203                             value = ASDateFromRFC3339String(value);
<a name="l00204"></a>00204                     }
<a name="l00205"></a>00205                     
<a name="l00206"></a>00206                     [object setValue:value forKey:attributeName];
<a name="l00207"></a>00207                 }
<a name="l00208"></a>00208             }
<a name="l00209"></a>00209         }
<a name="l00210"></a>00210         else
<a name="l00211"></a>00211         {
<a name="l00212"></a>00212             
<a name="l00213"></a>00213         }
<a name="l00214"></a>00214     }];
<a name="l00215"></a>00215     
<a name="l00216"></a>00216     [childContext performBlock:^{
<a name="l00217"></a>00217         NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:entityName];
<a name="l00218"></a>00218         [fetchRequest setFetchLimit:[request fetchLimit]];
<a name="l00219"></a>00219         [fetchRequest setFetchOffset:[request fetchOffset]];
<a name="l00220"></a>00220         
<a name="l00221"></a>00221         [fetchRequest setAffectedStores:[<span class="keyword">self</span> otherAffectedStores]];
<a name="l00222"></a>00222         [fetchRequest setResultType:NSDictionaryResultType];
<a name="l00223"></a>00223         [fetchRequest setPropertiesToFetch:[NSArray arrayWithObject:@&quot;updatedAt&quot;]];
<a name="l00224"></a>00224         
<a name="l00225"></a>00225         NSError *error = nil;
<a name="l00226"></a>00226         NSArray *objects = [childContext executeFetchRequest:fetchRequest error:&amp;error];
<a name="l00227"></a>00227         for (NSDictionary *object in objects)
<a name="l00228"></a>00228         {
<a name="l00229"></a>00229             NSLog(@&quot;%@&quot;, [object valueForKey:@&quot;updatedAt&quot;]);
<a name="l00230"></a>00230         }
<a name="l00231"></a>00231     }];
<a name="l00232"></a>00232     <span class="comment">// Be careful when invoking the -executeFetchRequest:error: method. Make sure that the store does not recurse.</span>
<a name="l00233"></a>00233     <span class="comment">//  [[self contextLazily] performBlock:^{</span>
<a name="l00234"></a>00234     <span class="comment">//      NSError *error = nil;</span>
<a name="l00235"></a>00235     <span class="comment">//      NSArray *objects = [[self contextLazily] executeFetchRequest:request error:&amp;error];</span>
<a name="l00236"></a>00236     <span class="comment">//  }];</span>
<a name="l00237"></a>00237 <span class="preprocessor">#endif</span>
<a name="l00238"></a>00238 <span class="preprocessor"></span>    <span class="keywordtype">id</span> result;
<a name="l00239"></a>00239     <span class="keywordflow">switch</span> ([request resultType])
<a name="l00240"></a>00240     {
<a name="l00241"></a>00241         <span class="keywordflow">case</span> NSCountResultType:
<a name="l00242"></a>00242             result = [NSArray arrayWithObject:[NSNumber numberWithUnsignedInteger:0]];
<a name="l00243"></a>00243             <span class="keywordflow">break</span>;
<a name="l00244"></a>00244         <span class="keywordflow">default</span>:
<a name="l00245"></a>00245             result = [NSArray array];
<a name="l00246"></a>00246     }
<a name="l00247"></a>00247     <span class="keywordflow">return</span> result;
<a name="l00248"></a>00248 <span class="preprocessor">#endif // 0</span>
<a name="l00249"></a>00249 <span class="preprocessor"></span>    <span class="comment">//------------------------------------------------------------------------------</span>
<a name="l00250"></a>00250 }
<a name="l00251"></a>00251 
<a name="l00252"></a><a class="code" href="scratch_8m.html#a07ef1546109945e445e2d6fec1401ca1">00252</a> - (id)executeSaveRequest:(NSSaveChangesRequest *)request withContext:(NSManagedObjectContext *)context error:(NSError *__autoreleasing *)outError
<a name="l00253"></a>00253 {
<a name="l00254"></a>00254     <span class="comment">//  NSSet *insertedObjects = [request insertedObjects];</span>
<a name="l00255"></a>00255     <span class="comment">//  NSSet *updatedObjects = [request updatedObjects];</span>
<a name="l00256"></a>00256     <span class="comment">//  NSSet *deletedObjects = [request deletedObjects];</span>
<a name="l00257"></a>00257     <span class="comment">//  NSSet *lockedObjects = [request lockedObjects];</span>
<a name="l00258"></a>00258     <span class="keywordflow">return</span> [NSArray array];
<a name="l00259"></a>00259 }
<a name="l00260"></a>00260 
<a name="l00261"></a><a class="code" href="scratch_8m.html#a161fe422550c1acf84dab37d1308291e">00261</a> - (NSIncrementalStoreNode *)newValuesForObjectWithID:(NSManagedObjectID *)objectID withContext:(NSManagedObjectContext *)context error:(NSError **)outError
<a name="l00262"></a>00262 {
<a name="l00263"></a>00263     <span class="keywordflow">return</span> [<span class="keyword">super</span> newValuesForObjectWithID:objectID withContext:context error:outError];
<a name="l00264"></a>00264 }
</pre></div></div>
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.5.1
</small></address>

</body>
</html>
